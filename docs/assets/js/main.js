"use strict";let showsContainer=document.querySelector(".js-shows-container"),favShowsContainer=document.querySelector(".js-favshows-container"),shows=[],favoritesShows=[];const btn=document.querySelector(".js-btn");function setLocalStorage(){localStorage.setItem("favoritesShows",JSON.stringify(favoritesShows))}function getLocalStorage(){const s=localStorage.getItem("favoritesShows"),o=JSON.parse(s);null!==o&&(favoritesShows=o,paintFavShows(),listenShows())}function getServerData(){const s=document.querySelector(".js-input").value;fetch(`http://api.tvmaze.com/search/shows?q=${s}`).then(s=>s.json()).then(s=>{shows=s,console.log(shows),paintShows(),listenShows()}).catch(function(s){console.log("Error al traer los datos del servidor",s)})}function addToFavorites(s){const o=parseInt(s.currentTarget.id),e=favoritesShows.findIndex(function(s,e){return s.id===o});if(!0===(-1!==e))favoritesShows.splice(e,1);else for(let s=0;s<shows.length;s++)shows[s].show.id===o&&favoritesShows.push(shows[s].show);console.log(e),console.log(favoritesShows),paintShows(),listenShows(),paintFavShows(),setLocalStorage(),document.querySelector(".reset").addEventListener("click",function(){favoritesShows.splice(0,favoritesShows.length),setLocalStorage(),paintShows(),paintFavShows(),listenShows()})}function paintShows(){let s="";for(let o=0;o<shows.length;o++){const e="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";if(s+=-1!==favoritesShows.indexOf(o)?`<div class="shows__item--favorite" id="${shows[o].show.id}">`:`<div class="shows__item js-shows-item " id="${shows[o].show.id}">`,s+=`<h2 class="shows__name">${shows[o].show.name}</h2>`,null===shows[o].show.image)s+=`<img class="shows__photo" src="${e}" />`;else{s+=`<img class="shows__photo" src="${shows[o].show.image.medium}" />`}s+=`GÃ©nero: ${shows[o].show.genres}<br>`,s+=`Fecha: ${shows[o].show.premiered}`,s+="</div>"}showsContainer.innerHTML=s}function paintFavShows(){let s="";for(let o=0;o<favoritesShows.length;o++){const e="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";if(s+=`<div class="shows__item--favorite shows__name" id="${favoritesShows[o].id}">`,s+=`<i class="far fa-times-circle js-xbtn" id="${favoritesShows[o].id}"></i>`,s+=`<h2 class="shows__name">${favoritesShows[o].name}</h2>`,null===favoritesShows[o].image)s+=`<img class="shows__photo---fav" src="${e}" />`;else{s+=`<img class="shows__photo---fav" src="${favoritesShows[o].image.medium}" />`}s+="</div>"}favShowsContainer.innerHTML=s,listenRemove()}function listenShows(){const s=document.querySelectorAll(".js-shows-item");for(const o of s)o.addEventListener("click",addToFavorites)}function listenRemove(){const s=document.querySelectorAll(".js-xbtn");for(const o of s)o.addEventListener("click",addToFavorites)}getLocalStorage(),btn.addEventListener("click",getServerData);